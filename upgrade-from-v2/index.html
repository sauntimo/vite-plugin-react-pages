<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>üìòVite Pages</title>
  <link rel="stylesheet" href="/vite-plugin-react-pages/assets/style.c2641e36.css" />
</head>
  <body>
    <script>window._vitePagesSSR={"routePath":"/upgrade-from-v2"};</script>
<div id="root"><div class="vp-local-layout"><header class="vp-antd-layout-header vp-local-header"><div class="vp-antd-row vp-antd-row-stretch" style="height:100%"><div style="flex:0 0 auto" class="vp-antd-col"><div class="vp-antd-row vp-antd-row-center vp-antd-row-middle" style="height:100%"><div class="vp-antd-col"><a class="vp-local-logoLink" href="/vite-plugin-react-pages/"><div style="margin-left:40px;font-size:20px">Vite Pages</div></a></div></div></div><div style="flex:auto" class="vp-antd-col"><div class="vp-antd-row vp-antd-row-end"><div class="vp-antd-col"><ul class="vp-antd-menu-overflow vp-antd-menu vp-antd-menu-root vp-antd-menu-horizontal vp-antd-menu-light vp-local-nav" role="menu" tabindex="0" data-menu-list="true"><li class="vp-antd-menu-overflow-item vp-antd-menu-item vp-antd-menu-item-only-child" style="opacity:1;order:0" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="https://github.com/vitejs/vite-plugin-react-pages" target="_blank" rel="noopener noreferrer">Github<!-- -->‚≠ê</a></span></li><li class="vp-antd-menu-overflow-item vp-antd-menu-overflow-item-rest vp-antd-menu-submenu vp-antd-menu-submenu-horizontal vp-antd-menu-submenu-disabled" style="opacity:0;height:0;overflow-y:hidden;order:9007199254740991;pointer-events:none;position:absolute" aria-hidden="true" role="none"><div role="menuitem" class="vp-antd-menu-submenu-title" aria-expanded="false" aria-haspopup="true" aria-disabled="true"><span role="img" aria-label="ellipsis" class="anticon anticon-ellipsis"><svg viewBox="64 64 896 896" focusable="false" data-icon="ellipsis" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"></path></svg></span><i class="vp-antd-menu-submenu-arrow"></i></div></li></ul><div style="display:none" aria-hidden="true"></div></div><div class="vp-antd-col"></div></div></div></div></header><div class="vp-antd-row vp-local-body"><div class="vp-antd-col vp-antd-col-md-6 vp-antd-col-lg-6 vp-antd-col-xl-5 vp-antd-col-xxl-4"><div class="vp-local-sider"><ul class="vp-antd-menu vp-antd-menu-root vp-antd-menu-inline vp-antd-menu-light vp-local-sideMenu" role="menu" tabindex="0" data-menu-list="true"><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/">Introduction</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/official-theme">Official Theme</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/fs-routing">Filesystem Routing</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/page-data">Page data</a></span></li><li class="vp-antd-menu-item-group"><div class="vp-antd-menu-item-group-title" title="advanced">advanced</div><ul class="vp-antd-menu-item-group-list"><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/advanced-fs-routing">Advanced FS Routing</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/theme-customization">Theme Customization</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/examples/component-library">Examples</a></span></li></ul></li><li class="vp-antd-menu-item-group"><div class="vp-antd-menu-item-group-title" title="upgrade-guides">upgrade-guides</div><ul class="vp-antd-menu-item-group-list"><li class="vp-antd-menu-item vp-antd-menu-item-selected vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/upgrade-from-v2">Upgrade from v2</a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"></div></div></div><div style="flex:auto;min-width:0" class="vp-antd-col"><main class="vp-antd-layout-content vp-local-content"><div class="markdown-body"><h1>Upgrade from v2</h1><h2><a class="anchor" id="upgrade-package-versions" href="/vite-plugin-react-pages/upgrade-from-v2#upgrade-package-versions"><span class="octicon octicon-link"></span></a>Upgrade package versions</h2><p>Upgrade these package versions:</p><div><pre class="prism-code language-json" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token property" style="color:rgb(3, 47, 98)">&quot;devDependencies&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token property" style="color:rgb(3, 47, 98)">&quot;@vitejs/plugin-react-refresh&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(3, 47, 98)">&quot;^1.3.1&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token property" style="color:rgb(3, 47, 98)">&quot;vite&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(3, 47, 98)">&quot;^2.3.5&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token property" style="color:rgb(3, 47, 98)">&quot;vite-plugin-mdx&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(3, 47, 98)">&quot;^3.3.1&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token property" style="color:rgb(3, 47, 98)">&quot;vite-plugin-react-pages&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(3, 47, 98)">&quot;^3.0.0&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token property" style="color:rgb(3, 47, 98)">&quot;vite-pages-theme-basic&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(3, 47, 98)">&quot;^3.0.0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></pre></div><h2><a class="anchor" id="install-peerdependencies-for-mdx" href="/vite-plugin-react-pages/upgrade-from-v2#install-peerdependencies-for-mdx"><span class="octicon octicon-link"></span></a>Install peerDependencies for mdx</h2><p><code>vite-plugin-mdx</code> no longer install mdx-related peerDependencies for you. You should install them in your project:</p><div><pre class="prism-code language-json" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token property" style="color:rgb(3, 47, 98)">&quot;devDependencies&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token property" style="color:rgb(3, 47, 98)">&quot;@mdx-js/mdx&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(3, 47, 98)">&quot;^1.6.22&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token property" style="color:rgb(3, 47, 98)">&quot;@mdx-js/react&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(3, 47, 98)">&quot;^1.6.22&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></pre></div><blockquote><p><a href="https://github.com/brillout/vite-plugin-mdx">vite-plugin-mdx</a> has been moved to a seperate repo. (<a href="https://github.com/vitejs/vite-plugin-react-pages/issues/6">related issue</a>)</p></blockquote><h2><a class="anchor" id="a-small-update-to-theme-api" href="/vite-plugin-react-pages/upgrade-from-v2#a-small-update-to-theme-api"><span class="octicon octicon-link"></span></a>A Small update to theme API</h2><blockquote><p><strong>If you have only used the basic theme and haven&#x27;t created a custom theme. You don&#x27;t need to care about this API change.</strong></p></blockquote><p>In <code>vite-plugin-react-pages@3.x</code>, vite-pages don&#x27;t pass staticData to the theme component any more. You should use the hook <code>useStaticData</code> to get staticData. This API update is for less prop drilling and more efficient HMR update during dev.</p><div><pre class="prism-code language-ts" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(227, 98, 9)">ThemeProps</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// staticData is removed, use useStaticData instead</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">readonly</span><span class="token plain"> loadedData</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token maybe-class-name">PagesLoaded</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">readonly</span><span class="token plain"> loadState</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token maybe-class-name">LoadState</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">/**</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token comment" style="color:rgb(106, 153, 85)"> * A react hook to get static data.</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token comment" style="color:rgb(106, 153, 85)"> * import { useStaticData } from &#x27;vite-plugin-react-pages/client&#x27;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token comment" style="color:rgb(106, 153, 85)"> */</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">export</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(227, 98, 9)">UseStaticData</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">PagesStaticData</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">path</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e3116c">string</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token builtin" style="color:#e3116c">string</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token builtin" style="color:#e3116c">any</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></pre></div><p>Here is an <a href="https://github.com/vitejs/vite-plugin-react-pages/commit/61f0fa0223ef28c526dfc7bd87bafd8de2523c38#diff-e18e1392eaf0be6f307cc5ba266f589b1517c4d991d6e0d5006c339fbe4b7ff6">example upgrade commit</a>.</p><h2><a class="anchor" id="findpages-api-change" href="/vite-plugin-react-pages/upgrade-from-v2#findpages-api-change"><span class="octicon octicon-link"></span></a>findPages API change</h2><blockquote><p><strong>If you have only used the &quot;Basic Filesystem Routing Convention&quot; and haven&#x27;t used <code>findPages</code> to do &quot;Advanced Filesystem Routing&quot;. You don&#x27;t need to care about this API change.</strong></p></blockquote><p>Previously, <code>vite-plugin-react-pages</code> don&#x27;t react to the change from the fileSystem. If there is file add/update/unlink that will result in different pageData, you need to restart the dev server.
In <code>vite-plugin-react-pages@3.x</code>, vite-pages use chokidar to scan the fileSystem and watch for files.</p><blockquote><p>Thanks <a href="https://github.com/aleclarson">Alec Larson</a> for the idea and initial implementation.</p></blockquote><p>In order to handle the change from from the fileSystem, the &quot;Advanced Filesystem Routing&quot; API has changed from the <code>findPages</code> API to the <code>pageStrategy</code> API. Checkout <a href="/vite-plugin-react-pages/advanced-fs-routing">the advanced-fs-routing doc</a> to learn about the latest API.</p></div></main></div></div></div></div>
    <script type="module" src="/vite-plugin-react-pages/assets/clientRender.715dbcf5.js"></script>
  </body>
</html>
